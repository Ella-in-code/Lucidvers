<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Voice Controlled 3D Scene</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #4b0082, #6a0dad, #9370db);
      color: white;
      text-align: center;
    }

    /* üåÑ START PAGE STYLES */
    #home-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #4b0082, #6a0dad, #9370db);
      color: #fff;
      z-index: 10;
      transition: opacity 1s ease;
    }

    #home-screen img {
      width: 300px;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
      margin-bottom: 20px;
    }

    #home-screen h1 {
      font-size: 2.5rem;
      margin: 10px 0;
      letter-spacing: 1px;
    }

    #home-screen p {
      font-size: 1.2rem;
      max-width: 500px;
      margin-bottom: 30px;
      line-height: 1.4;
    }

    #start-btn {
      padding: 15px 40px;
      font-size: 1.2rem;
      font-weight: bold;
      color: white;
      background: #8537d8;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.3s, transform 0.1s;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    #start-btn:hover {
      background: #6a1bd3;
      transform: scale(1.05);
    }

    /* üéôÔ∏è VOICE CONTROLS */
    #voice-controls {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 5;
      display: none;
    }

    #speak-btn {
      padding: 15px 30px;
      font-size: 1.2rem;
      font-weight: bold;
      color: rgb(195, 166, 223);
      background-color: #8537d8;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s, transform 0.1s;
    }

    #speak-btn:hover {
      background-color: #65a9ed;
    }

    #speak-btn.listening {
      background-color: #da6161;
      animation: pulse 1s infinite alternate;
    }

    #status {
      margin-top: 10px;
      color: rgb(248, 50, 221);
      background-color: rgba(0, 0, 0, 0.5);
      padding: 6px 10px;
      border-radius: 4px;
    }

    @keyframes pulse {
      from { box-shadow: 0 0 0 0 rgba(215, 73, 63, 0.7); }
      to { box-shadow: 0 0 0 10px rgba(244,67,54,0); }
    }

    /* Hide the scene initially */
    a-scene {
      display: none;
    }
  </style>
</head>
<body>
  <!-- üåÑ HOME SCREEN -->
  <div id="home-screen">
    <img src="https://cdn.pixabay.com/photo/2016/11/29/03/53/mountain-1866510_1280.jpg" alt="Mountain" />
    <h1>üéôÔ∏è Welcome to Your 3D World</h1>
    <h3>Created by Aditi and Sarthak</h3>
    <p>Speak to control your 3D environment ‚Äî say ‚ÄúShow mountain,‚Äù ‚ÄúShow river,‚Äù or ‚ÄúSky sunset.‚Äù Click below to begin your experience!</p>
    <button id="start-btn">Start Experience</button>
  </div>

  <!-- üåç VR SCENE -->
  <a-scene id="vr-scene">
    <a-sky id="sky" color="#87CEEB"></a-sky>

    <a-entity position="0 1.6 0" camera look-controls>
      <a-cursor color="#FFF"></a-cursor>
    </a-entity>

    <!-- Mountains as geometric shapes -->
    <a-cone id="mountain" color="#556B2F" height="6" radius-bottom="4" position="0 3 -10" visible="false"></a-cone>
    <a-cone color="#6B8E23" height="4" radius-bottom="3" position="4 2 -9" visible="false"></a-cone>

    <!-- River -->
    <a-plane id="river" color="#4682B4" width="10" height="3" rotation="-90 0 0" position="0 0 -6" visible="false"></a-plane>

    <!-- Cube -->
    <a-box id="cube" position="2 1 -5" rotation="0 45 0" color="#FF6347" visible="false"></a-box>

    <!-- Lights -->
    <a-light type="directional" intensity="0.8" position="1 2 3"></a-light>
    <a-light type="ambient" color="#ccc"></a-light>
  </a-scene>

  <!-- üéôÔ∏è VOICE CONTROLS -->
  <div id="voice-controls">
    <div id="status">Click ‚ÄúSpeak‚Äù to start voice control.</div>
    <button id="speak-btn">SPEAK</button>
  </div>

  <script>
    // üåÑ START BUTTON LOGIC
    const homeScreen = document.getElementById('home-screen');
    const scene = document.getElementById('vr-scene');
    const voiceControls = document.getElementById('voice-controls');
    const startBtn = document.getElementById('start-btn');

    startBtn.addEventListener('click', () => {
      homeScreen.style.opacity = '0';
      setTimeout(() => {
        homeScreen.style.display = 'none';
        scene.style.display = 'block';
        voiceControls.style.display = 'block';
      }, 800);
    });

    // üéôÔ∏è VOICE RECOGNITION LOGIC
    const mountain = document.querySelector('#mountain');
    const river = document.querySelector('#river');
    const cube = document.querySelector('#cube');
    const sky = document.querySelector('#sky');
    const speakBtn = document.querySelector('#speak-btn');
    const statusDiv = document.querySelector('#status');

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
      statusDiv.textContent = "Speech recognition not supported.";
      speakBtn.disabled = true;
    } else {
      const recog = new SpeechRecognition();
      recog.lang = 'en-US';
      recog.continuous = true;

      recog.onstart = () => {
        speakBtn.classList.add('listening');
        statusDiv.textContent = "Listening...";
      };

      recog.onend = () => {
        speakBtn.classList.remove('listening');
        statusDiv.textContent = "Stopped. Click again to listen.";
      };

      recog.onresult = e => {
        const cmd = e.results[e.results.length - 1][0].transcript.toLowerCase().trim();
        statusDiv.textContent = `Command: "${cmd}"`;

        if (cmd.includes('show mountain')) mountain.setAttribute('visible', true);
        else if (cmd.includes('hide mountain')) mountain.setAttribute('visible', false);
        else if (cmd.includes('show river')) river.setAttribute('visible', true);
        else if (cmd.includes('hide river')) river.setAttribute('visible', false);
        else if (cmd.includes('so cute')) cube.setAttribute('visible', true);
        else if (cmd.includes('disappear')) cube.setAttribute('visible', false);
        else if (cmd.includes('sky sunset')) sky.setAttribute('color', '#FF4500');
        else if (cmd.includes('sky day')) sky.setAttribute('color', '#87CEEB');
        else if (cmd.includes('spin'))
          cube.setAttribute('animation', 'property: rotation; to: 0 360 0; loop: true; dur: 4000; easing: linear');
        else if (cmd.includes('stop spin')) cube.removeAttribute('animation');
        else statusDiv.textContent = `Unknown command: "${cmd}"`;
      };

      let listening = false;
      speakBtn.onclick = () => {
        if (listening) { recog.stop(); listening = false; }
        else { recog.start(); listening = true; }
      };
    }
  </script>
</body>

</html>
